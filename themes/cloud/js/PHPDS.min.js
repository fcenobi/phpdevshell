PHPDS={};PHPDS.remoteCallURL=document.URL;PHPDS.aload=function(t){"use strict";t=t||window.document.querySelectorAll("[data-aload]"),void 0===t.length&&(t=[t]);var a,e=0,r=t.length;for(e;r>e;e+=1)a=t[e],a["LINK"!==a.tagName?"src":"href"]=a.getAttribute("data-aload"),a.removeAttribute("data-aload");return t};PHPDS.RemoteCallException=function(deferred,ajax){this.deferred=deferred;this.ajax=ajax;this.handled=false};PHPDS.url={};PHPDS.url.decodeParams=function(url){var args_enc,el,i,nameval,ret;if(!url){url=document.URL}ret={};el=document.createElement("a");el.href=url;args_enc=el.search.substring(1).split("&");for(i=0;i<args_enc.length;i++){args_enc[i].replace(/\+/g," ");nameval=args_enc[i].split("=",2);if(nameval[0]){ret[decodeURIComponent(nameval[0])]=decodeURIComponent(nameval[1])}}return ret};PHPDS.url.encodeParams=function(params,url){var args_enc,el,name;if(!url){url=document.URL}el=document.createElement("a");el.href=url;args_enc=PHPDS.url.decodeParams(url);for(name in params){if(params.hasOwnProperty(name)){name=encodeURIComponent(name);params[name]=encodeURIComponent(params[name]);args_enc[name]=params[name]}}el.search="?"+$.param(args_enc);return el.href};PHPDS.url.relocate=function(url,params){if(params===undefined&&url!==null&&typeof url=="object"){params=url;url=null}document.location=PHPDS.url.encodeParams(params,url)};PHPDS.remoteCall=function(functionName,params,extParams){var url=PHPDS.remoteCallURL;if(extParams){url=PHPDS.url.encodeParams(extParams,url)}return new $.Deferred(function(){var self_deferred=this;$.when($.ajax({url:url,dataType:"json",data:params,type:"POST",headers:{"X-Requested-Type":"json","X-Remote-Call":functionName},beforeSend:function(xhr){xhr.setRequestHeader("X-Requested-Type","json");xhr.setRequestHeader("X-Remote-Call",functionName)}}).done(function(result,state,self_ajax){self_deferred.resolve(result,state,self_ajax)}).fail(function(self_ajax){PHPDS.errorHandler(new PHPDS.RemoteCallException(self_deferred,self_ajax))}))})};PHPDS.errorHandler=function(message,url,line,object){if(!message){window.onerror=function(message,url,line){return PHPDS.errorHandler(message,url,line)};return true}else if(typeof message=="function"){this.userErrorHandler=message;return true}else if(message instanceof PHPDS.RemoteCallException){var r=message.deferred.reject(message);if(message.handled){return true}else{object=message;message="Unhandled RemoteCall exception: "}}if(this.userErrorHandler){return this.userErrorHandler(message,url,line,object)}else{if(console&&console.log){console.log("PHPDS.errorHandler ",message," / ",url," / ",line," / ",object)}}return true};PHPDS.documentReady=function(root){PHPDS.errorHandler();if(!root){root=$("BODY")}PHPDS.aload();$("#nav li a, #bread li a, .cp-selector, .hover, .loginlink",root).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")});$(".active",root).addClass("ui-state-active");$(".cp-selector, .hover, .loginlink",root).addClass("ui-state-default ui-corner-all");$("#nav > li > a, ul#bread > li > a",root).addClass("ui-state-default ui-corner-all");$("#nav li a, #bread li a",root).hover().addClass("ui-corner-all");$("#nav ul, #bread ul, fieldset",root).addClass("ui-widget-content ui-corner-all");$("#nav > .current a, #bread > .current a",root).addClass("ui-state-active ui-corner-all");$("#nav .grandparent .nav-grand, #bread .grandparent .nav-grand",root).addClass("ui-icon ui-icon-triangle-1-s left");$("#nav ul .parent .nav-parent, #bread ul .parent .nav-parent",root).addClass("ui-icon ui-icon-triangle-1-e right");$("#bread .jump span",root).addClass("ui-icon ui-icon-calculator left");$("#bread .home span",root).addClass("ui-icon ui-icon-home left");$("#bread .up span",root).addClass("ui-icon ui-icon-arrowreturnthick-1-w left");$("#logged-in span",root).addClass("ui-icon ui-icon-power left");$("#logged-out span",root).addClass("ui-icon ui-icon-key left")};function PHPDS_remoteCall(functionName,params,extParams){return PHPDS.remoteCall(functionName,params,extParams)}function PHPDS_documentReady(root){return PHPDS.documentReady(root)}